# 有关埋点统计的知识梳理

## 什么是埋点

埋点其实就是数据采集，为后续的 **分析**、**报警**、**优化** 等提供依据。

大多时候，我们要为数据进行语义化包装，才能让其他人更加轻松地为理解和使用它，不然繁杂的数据并无意义。<br />
可见，埋点其实是做三件事：1.**确定分析内容** 2.**制定数据语义** 3.**采集数据**。<br />

举个例子，我想统计每月新增用户，那么就需要规定什么是用户/什么是新用户，再由技术进行开发。

_这也是初体验埋点时会觉得没用的原因，因为它的语义可能并没有适配上你的理解；_<br />
_另外你也许会觉得应该是反着来的，先收集了数据再分析，那你可以看完全文后再思考下。_

## 确定分析内容

埋点的目的，也就是要分析的内容，会由不同的角色提出不同的需求，大致可以分为以下几种：<br />

- 运营埋点
- 安全性埋点
- 操作记录埋点
- 无语义埋点
- 性能埋点
- ...

### 运营埋点

营销的主要目的笼统来讲就两个：**企业的社会价值** 和 **产品的市场价值**；<br />
你可以将它们再抽象，其实可以去对应 **流量** 和 **销量**；<br />
再细化一些，常见的，流量有 PV、UV、触达率、留存率，销量有 投放量、付费率、续费率 等等。

比如你想加大品牌宣传力度，但资金可能有限，<br />
-> 你需要埋点分析来源渠道的流量占比，然后再确定是加强群转发引导还是增加推文投放。

比如你发现某地区的流量相对流量较大，你猜是因为某事件，<br />
-> 你加急上线一个小活动蹭热度，用流量趋势来验证猜测，再确定是否整波大的。

无论是看定量还是看增量，运营埋点讲究一个触达，访问了某页面

比如埋点消费区间，最终拍卖额在 100-1k / 1k-3k / 3k- 5k 区间的各有多少人；<br />
比如埋点拍卖中心来源渠道，从 推文 / 菜单 / 群 / 扫码 等打开方式而来的人各有多少；<br />
比如埋点用户上线密集时段来决定开拍时间；<br />
比如埋点打开率趋势来决定是否进行推送或举行活动......

产品埋点则是为了 1. 寻找潜在需求 2. 优化现有流程完成度 3. 分析版本差异效果。<br />
<br />比如埋点流程节点进行计数，来算出完成率或跳出率；<br />比如对各类行为进行计数，发现触发率最高的行为；<br />比如针对营销埋点分析的结果再次分析，确定新版本差异。

### 安全性埋点

比如接口出入参、代码运行报错、应用崩溃等

### 操作记录埋点

通常是所有 跳页、事件、流程 都要埋，最常用于技术复现线上问题，有时也会提供给产品做转化分析。

### 无语义埋点

纯事件埋点，用于热点图，通常是给交互设计师作分析的，类似眼动仪但数据量更充足。

<img src="https://s1.ax1x.com/2020/10/23/BA59UK.png" alt="点击热点图案例" width="320">

### 性能埋点

前端比较熟悉的 DCL、FP、FCP、FMP、LCP、TTI、FID 都是可以进行性能分析的埋点。<br />
当然不仅是页面级的，组件的渲染速率，接口返回的速率和体积，内存占用体积，等等。

## 数据的内容

### 事件埋点

- 某人某时刻进行某交互
- 某时刻请求某接口得到某结果
- 某人在某处做某事所持续的时间段

### 其他埋点

- 来源渠道/流程（同步的(如从某人转发进入)，异步的(通过某人分享完成注册)）
- 设备信息（机型/手机尺寸/网络等）
- 用户信息（登录时间/性别/移动联通等）
- 地理位置

## 埋点数据分析

### 数据分析的方向

- 某时间段的数据分析
- 某用户的数据分析
- 某交互行为的数据分析
- 某流程的数据分析

### 数据分析的分类

- 数量
- 比例
- 走势
- 对比

## 埋点技术梳理

上报时机（性能考量）：缓存上报，定时上报，即时上报<br />
上报数据类型（确定展示方式）：计数（该行为直接加一），语义字符串（该行为的某情况加一），持续时长<br />
上报数据分类（埋点数据会非常庞大，需分类/拆库等）：报错，系统，行为，流程<br />
