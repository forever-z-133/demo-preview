# 常用于定时任务中的 cron 表达式

Cron 表达式是一个字符串，字符串以 5 或 6 个空格隔开，分为 6 或 7 个域，每一个域代表一个含义，即如下两种语法格式： 

- `Seconds Minutes Hours DayofMonth Month DayofWeek Year`
- `Seconds Minutes Hours DayofMonth Month DayofWeek`

每一个域可出现的字符如下：

| key            | 可用字符            | 有效范围 |
|:-              |:-                  |:- |
| **Seconds**    | `, - * /"`         | 0-59 的整数 |
| **Minutes**    | `, - * /"`         | 0-59 的整数 |
| **Hours**      | `, - * /"`         | 0-23 的整数 |
| **DayofMonth** | `, - * / ? L W C"` | 0-31 的整数 |
| **Month**      | `, - * /"`         | 1-12 的整数或 JAN-DEC |
| **DayofWeek**  | `, - * / ? L C #"` | 1-7 的整数或 SUN-SAT。1 表示周天 |
| **Year**       | `, - * /"`         | 1970-2099 的整数 |

每一个域都使用数字，但还可以出现如下特殊字符，它们的含义是：

| key    | 解释     |
|:-      |:-       |
| **\*** | 表示匹配该域的任意值。例如在 Minutes 域使用 * 即表示每分钟都会触发 |
| **?**  | 只能用在 DayofMonth 和 DayofWeek 两个域。它也匹配域的任意值，但实际不会。因为 DayofMonth 和 DayofWeek 会相互影响。例如想在每月的 20 日触发调度，不管 20 日到底是周几，则只能使用如下写法： 13 13 15 20 * ?， 其中最后一位只能用 ?，而不能使用 *，如果使用 * 表示不管周几都会触发，实际上并不是这样 |
| **-**  | 表示范围。例如在 Minutes 域使用 5-20 即从 5 到 20 分钟每分钟触发一次 |
| **/**  | 表示起始时间和时间间隔。例如在 Minutes 域使用 3/20，则意味从第 3 分钟开始，每 20 分钟触发一次 |
| **,**  | 表示列出枚举值值。例如在 Minutes 域使用 5,20，则意味着在 5 和 20 分每分钟触发一次 |
| **L**  | 表示最后。例如在 DayofWeek 域使用 5L，意味着在最后的一个周四触发 |
| **W**  | 表示有效工作日，将在离指定日期最近的周一到周五触发事件。例如在 DayofMonth 使用 5W，如果 5 日是周六，则将在最近的工作日周五，即 4 日触发。如果 5 日是周天，则在周一的 6 日触发；如果 5 日在工作日，则就在 5 日触发。注意，寻找不会跨过月份 |
| **LW** | 两个字符的连用，表示在某个月最后一个工作日，即最后一个周五 |
| **#**  | 用于确定每个月第几个周几。例如在 DayofMonth 域使用 4#2 即某月的第二个周三 |

看些例子来加强理解：

| 例子                     | 解释         |
|:-                        |:-           |
| 0 0 10,14,16 * * ?       | 每天上午 10 点，下午 2 点，4 点 |
| 0 0/30 9-17 * * ?        | 朝九晚五工作时间内每半小时 |
| 0 0 12 ? * WED           | 每个周三中午 12 点 |
| 0 0 12 * * ?             | 每天中午 12 点 |
| 0 15 10 ? * *            | 每天上午 10:15 |
| 0 15 10 * * ? 2005       | 2005年的每天上午 10:15 触发 |
| 0 * 14 * * ?             | 每天下午 2 点到下午 2:59 期间的每 1 分钟 |
| 0 0/5 14 * * ?           | 每天下午 2 点到下午 2:55 期间的每 5 分钟 |
| 0 0/5 14,18 * * ?        | 每天下午 2 点到 2:55 期间和下午 6 点到 6:5 5期间的每 5 分钟 |
| 0 0-5 14 * * ?           | 每天下午 2 点到下午 2:05 期间的每 1 分钟 |
| 0 10,44 14 ? 3 WED       | 每年三月的周三的下午 2:10 和 2:44 |
| 0 15 10 ? * MON-FRI      | 周一至周五的上午 10:15 |
| 0 15 10 15 * ?           | 每月 15 日上午 10:15 |
| 0 * 14 * * ?             | 每天下午 2 点到下午 2:59 期间的每 1 分钟 |
| 0 15 10 L * ?            | 每月最后一日的上午 10:15 |
| 0 15 10 ? * 6L           | 每月的最后一个周五上午 10:15 |
| 0 15 10 ? * 6L 2002-2005 | 2002 年至 2005 年的每月的最后一个周五上午 10:15 |
| 0 15 10 ? * 6#3          | 每月的第三个周五上午 10:15 |
